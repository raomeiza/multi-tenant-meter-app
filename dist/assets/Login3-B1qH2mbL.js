import{w as O,Y as A,E as w,e as a,V as $,Z as q,j as e,$ as f,a0 as b,a1 as y,a2 as x,a3 as Z,a4 as I,a5 as G,T as o,x as v,a6 as N,J as R,G as s,a7 as S,a8 as V,H as _}from"./index-BhsBx0mV.js";import{F as J,c as Q,a as C,I as U,d as Y,b as K,C as X,A as ee,e as te,f as se}from"./AuthFooter-RTQEHwMt.js";import"./Link-D5gDEoxv.js";const ne=({...h})=>{const i=O();A(i.breakpoints.down("md"));const k=w(t=>t.customization),p=w(t=>t.auth),[E,F]=a.useState(!0),[re,D]=a.useState({success:!1}),[P,u]=a.useState(null),[j,l]=a.useState(!1),B=$(),[m,L]=a.useState(!1),T=()=>{L(!m)},g=q(),W=t=>{t.preventDefault()},z=/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i;a.useEffect(()=>{console.log(k),console.log(p),p.isAuthenticated&&g("/")},[]);const H=async t=>{t.preventDefault(),u(null),l(!0);const c=t.target,d=new FormData(c),r=Object.fromEntries(d.entries());console.log(r);try{r.email.match(z)?fetch("http://localhost:5000/user/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then(n=>n.json()).then(n=>{console.log(n),B({type:"LOGIN",payload:n}),g("/"),n.error?(u(n.error),l(!1)):(D({success:!0}),l(!1))}):setErrors({submit:"Invalid email address"})}catch(n){console.error(n),l(!1),u("Failed to login")}};return e.jsx(e.Fragment,{children:e.jsx(J,{initialValues:{email:"",password:"",submit:null},validationSchema:Q().shape({email:C().email("Must be a valid email").max(255).required("Email is required"),password:C().max(255).required("Password is required")}),children:({errors:t,handleBlur:c,handleChange:d,touched:r,values:n})=>e.jsxs("form",{noValidate:!0,onSubmit:H,disabled:j,children:[e.jsxs(f,{fullWidth:!0,error:!!(r.email&&t.email),sx:{...i.typography.customInput},children:[e.jsx(b,{htmlFor:"outlined-adornment-email-login",children:"Email Address / Username"}),e.jsx(y,{id:"outlined-adornment-email-login",type:"email",value:n.email,name:"email",onBlur:c,onChange:d,label:"Email Address",inputProps:{}}),r.email&&t.email&&e.jsx(x,{error:!0,id:"standard-weight-helper-text-email-login",children:t.email})]}),e.jsxs(f,{fullWidth:!0,error:!!(r.password&&t.password),sx:{...i.typography.customInput},children:[e.jsx(b,{htmlFor:"outlined-adornment-password-login",children:"Password"}),e.jsx(y,{id:"outlined-adornment-password-login",type:m?"text":"password",value:n.password,name:"password",onBlur:c,onChange:d,endAdornment:e.jsx(U,{position:"end",children:e.jsx(Z,{"aria-label":"toggle password visibility",onClick:T,onMouseDown:W,edge:"end",size:"large",children:m?e.jsx(Y,{}):e.jsx(K,{})})}),label:"Password",inputProps:{}}),r.password&&t.password&&e.jsx(x,{error:!0,id:"standard-weight-helper-text-password-login",children:t.password})]}),e.jsxs(I,{direction:"row",alignItems:"center",justifyContent:"space-between",spacing:1,children:[e.jsx(G,{control:e.jsx(X,{checked:E,onChange:M=>F(M.target.checked),name:"checked",color:"primary"}),label:"Remember me"}),e.jsx(o,{variant:"subtitle1",color:"secondary",sx:{textDecoration:"none",cursor:"pointer"},children:"Forgot Password?"})]}),t.submit&&e.jsx(v,{sx:{mt:3},children:e.jsx(x,{error:!0,children:t.submit})}),e.jsx(o,{variant:"subtitle1",color:"error",sx:{mt:2},children:P}),e.jsx(v,{sx:{mt:2},children:e.jsx(N,{children:e.jsx(R,{disableElevation:!0,disabled:j,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"secondary",children:"Sign in"})})})]})})})},le=()=>{const h=A(i=>i.breakpoints.down("md"));return e.jsx(ee,{children:e.jsxs(s,{container:!0,direction:"column",justifyContent:"flex-end",sx:{minHeight:"100vh"},children:[e.jsx(s,{item:!0,xs:12,children:e.jsx(s,{container:!0,justifyContent:"center",alignItems:"center",sx:{minHeight:"calc(100vh - 68px)"},children:e.jsx(s,{item:!0,sx:{m:{xs:1,sm:3},mb:0},children:e.jsx(te,{children:e.jsxs(s,{container:!0,spacing:2,alignItems:"center",justifyContent:"center",children:[e.jsx(s,{item:!0,sx:{mb:3},children:e.jsx(S,{to:"#","aria-label":"logo",children:e.jsx(V,{})})}),e.jsx(s,{item:!0,xs:12,children:e.jsx(s,{container:!0,direction:{xs:"column-reverse",md:"row"},alignItems:"center",justifyContent:"center",children:e.jsx(s,{item:!0,children:e.jsxs(I,{alignItems:"center",justifyContent:"center",spacing:1,children:[e.jsx(o,{color:"secondary.main",gutterBottom:!0,variant:h?"h3":"h2",children:"Hi, Welcome Back"}),e.jsx(o,{variant:"caption",fontSize:"16px",textAlign:{xs:"center",md:"inherit"},children:"Enter your credentials to continue"})]})})})}),e.jsx(s,{item:!0,xs:12,children:e.jsx(ne,{})}),e.jsx(s,{item:!0,xs:12,children:e.jsx(_,{})}),e.jsx(s,{item:!0,xs:12,children:e.jsx(s,{item:!0,container:!0,direction:"column",alignItems:"center",xs:12,children:e.jsx(o,{component:S,to:"/register",variant:"subtitle1",sx:{textDecoration:"none"},children:"Don't have an account?"})})})]})})})})}),e.jsx(s,{item:!0,xs:12,sx:{m:3,mt:1},children:e.jsx(se,{})})]})})};export{le as default};
